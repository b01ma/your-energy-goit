var Ee=Object.defineProperty;var ee=e=>{throw TypeError(e)};var be=(e,t,r)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var G=(e,t,r)=>be(e,typeof t!="symbol"?t+"":t,r),we=(e,t,r)=>t.has(e)||ee("Cannot "+r);var te=(e,t,r)=>t.has(e)?ee("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r);var S=(e,t,r)=>(we(e,t,"access private method"),r);import{a as K,i as T,l as $}from"./vendor-CypzKZfR.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const Le=()=>{const e=document.querySelector("#mobile-menu-btn"),t=document.querySelector("#header-mobile-menu"),r=document.querySelector(".header-nav"),n=document.querySelector(".header-socials"),o=t.querySelectorAll(".header-socials-link"),s=globalThis.matchMedia("(max-width: 768px)");function a(){e.setAttribute("aria-expanded","true"),t.dataset.expanded="true"}function i(){e.setAttribute("aria-expanded","false"),t.dataset.expanded="false"}function d(){e.classList.remove("visually-hidden"),r.classList.add("visually-hidden"),n.classList.add("visually-hidden")}function u(){e.classList.add("visually-hidden"),r.classList.remove("visually-hidden"),n.classList.remove("visually-hidden"),i()}function c(){var g,h,_,E;const l=globalThis.location.pathname.includes("favorites");(g=document.querySelector("#nav-desktop-home"))==null||g.classList.toggle("nav-active",!l),(h=document.querySelector("#nav-desktop-favorites"))==null||h.classList.toggle("nav-active",l),(_=document.querySelector("#nav-mobile-home"))==null||_.classList.toggle("nav-active",!l),(E=document.querySelector("#nav-mobile-favorites"))==null||E.classList.toggle("nav-active",l)}function m(l){l.matches?d():u()}e.addEventListener("click",()=>{e.getAttribute("aria-expanded")==="true"?i():a()}),o.forEach(l=>{l.addEventListener("click",i)}),document.addEventListener("keydown",l=>{l.key==="Escape"&&t.getAttribute("aria-expanded")==="true"&&i()}),document.addEventListener("DOMContentLoaded",()=>{c()}),m(s),s.addEventListener("change",m)};var v,le,P,F;class Se{constructor(t){te(this,v);G(this,"PAGE_DEFAULT",1);G(this,"LIMIT_DEFAULT",10);this.client=K.create({baseURL:t,headers:{"Content-Type":"application/json"}})}async getExercisesByFilters(t={}){const{page:r,limit:n,...o}=t,s={...S(this,v,le).call(this,o),page:S(this,v,F).call(this,r,this.PAGE_DEFAULT),limit:S(this,v,F).call(this,n,this.LIMIT_DEFAULT)};try{return(await this.client.get("exercises",{params:s})).data}catch(a){throw new Error(a.response.data.message)}}async getExercisesById(t=""){if(!S(this,v,P).call(this,t))return{};try{return(await this.client.get(`exercises/${t}`)).data}catch(n){throw new Error(n.response.data.message)}}async getFiltersOfExercises(t={}){const{filter:r,page:n,limit:o}=t,s={filter:S(this,v,P).call(this,r),page:S(this,v,F).call(this,n,this.PAGE_DEFAULT),limit:S(this,v,F).call(this,o,this.LIMIT_DEFAULT)};try{return(await this.client.get("filters",{params:s})).data}catch(a){throw new Error(a.response.data.message)}}async getQuote(){return(await this.client.get("quote")).data}async subscribe(t=""){try{return(await this.client.post("subscription",{email:t})).data}catch(r){throw new Error(r.response.data.message)}}async addRating(t,r={}){try{return(await this.client.patch(`exercises/${t}/rating`,r)).data}catch(n){throw new Error(n.response.data.message)}}}v=new WeakSet,le=function(t={}){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,S(this,v,P).call(this,n)]).filter(([r,n])=>n!==void 0))},P=function(t=""){if(typeof t!="string")return;const r=t.trim();return r.length?r:void 0},F=function(t,r){const n=Number(t);return Number.isFinite(n)?n:r};const M=new Se("https://your-energy.b.goit.study/api/"),Me=()=>{const e="A lot of times I find that people who are blessed with the most talent don't ever develop that attitude, and the ones who aren't blessed in that way are the most competitive and have the biggest heart.",t="Tom Brady";document.addEventListener("DOMContentLoaded",async()=>{const r=new Date().toISOString().slice(0,10),n=JSON.parse(localStorage.getItem("dailyQuote"));if(n&&n.date===r){document.getElementById("quote-text").textContent=n.quote,document.getElementById("quote-author").textContent=n.author;return}try{const{quote:o,author:s}=await M.getQuote();document.getElementById("quote-text").textContent=o,document.getElementById("quote-author").textContent=s,localStorage.setItem("dailyQuote",JSON.stringify({quote:o,author:s,date:r}))}catch(o){console.error("Error loading quote:",o),document.getElementById("quote-text").textContent=e,document.getElementById("quote-author").textContent=t}})};function Ie(e,t){const{name:r,imgURL:n}=e;return`<li class="categories-item">
            <a
              href="javascript:void(0);"
              class="category-card"
              data-name="${r}"
              aria-label="Category ${r}">

                <div class="card-image-wrapper">
                    <img src="${n}" alt="${r}">
                    <div class="card-overlay"></div>
                </div>

                <div class="card-content">
                    <h3 class="category-title">${r}</h3>
                    <p class='category-filter'>${t}</p>
                </div>
            </a>
        </li>`}const x="/your-energy-goit/assets/icons-BI5Wx2_-.svg";function de(e){const{id:t,isHomePage:r=!0,rating:n,name:o,burnedCalories:s,time:a,bodyPart:i,target:d}=e;return`
  <li class="exercise-card" data-id="${t}">
    <div class="exercise-card__header">
      <div class="exercise-card__workout-and-rating">
        <div class="exercise-card__workout">
          <span class="exercise-card__workout__text">WORKOUT</span>
        </div>
        ${Ce(r,n)}
      </div>
      <button class="exercise-card__start">
        <span class="exercise-card__start__text">Start</span>
        <svg class="exercise-card__start__icon" width="16" height="16">
          <use href="${x}#icon-arrow-black"></use>
        </svg>
      </button>
    </div>
    <div class="exercise-card__body">
      <div class="exercise-card__icon-runner__container">
        <svg class="exercise-card__icon-runner" width="16" height="16">
          <use href="${x}#icon-runner"></use>
        </svg>
      </div>
      <p class="exercise-card__title">
        ${Be(o)}
      </p>
    </div>
    <ul class="exercise-card__footer__list">
      <li class="exercise-card__footer__item">
        <span
          class="exercise-card__footer__text exercise-card__footer__text__key"
          >Burned calories:</span
        ><span
          class="exercise-card__footer__text exercise-card__footer__text__value"
          >${s} / ${a} min</span
        >
      </li>
      <li class="exercise-card__footer__item">
        <span
          class="exercise-card__footer__text exercise-card__footer__text__key"
          >Body part:</span
        ><span
          class="exercise-card__footer__text exercise-card__footer__text__value"
          >${i}</span
        >
      </li>
      <li class="exercise-card__footer__item">
        <span
          class="exercise-card__footer__text exercise-card__footer__text__key"
          >Target:</span
        ><span
          class="exercise-card__footer__text exercise-card__footer__text__value"
          >${d}</span
        >
      </li>
    </ul>
  </li>
  `}function Ce(e,t){return e?`<div class="exercise-card__rating">
          <span class="exercise-card__rating__number">${t}</span>
          <svg width="13" height="13">
            <use fill="#EEA10C" href="${x}#icon-star"></use>
          </svg>
        </div>`:`<svg class="exercise-card__trash-icon" width="16" height="16">
          <use href="${x}#icon-trash"></use>
        </svg>`}function Be(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function O({container:e,currentPage:t,totalPages:r,onPageChange:n}){if(!e)return;if(t=Number(t)||1,r=Number(r)||1,!r||r<=1){e.innerHTML="",e.hidden=!0;return}e.hidden=!1;const o=(u,c,m="",l=!1,g=!1)=>{const h=l?"disabled":"",_=g?" ex-pagination__btn--active":"",E=c?`data-page="${c}"`:"";return`<button type="button" class="ex-pagination__btn ${m}${_}" ${E} ${h}>${u}</button>`};let s=[],a=!1,i=!1;if(r<=3)for(let u=1;u<=r;u+=1)s.push(u);else t<=2?(s=[1,2,3],i=!0):t>=r-1?(s=[r-2,r-1,r],a=!0):(s=[t-1,t,t+1],a=!0,i=!0);let d="";d+=o("«",1,"ex-pagination__btn--arrow",t===1),d+=o("‹",t-1,"ex-pagination__btn--arrow",t===1),a&&(d+='<span class="ex-pagination__ellipsis">…</span>'),s.forEach(u=>{d+=o(String(u),u,"",!1,u===t)}),i&&(d+='<span class="ex-pagination__ellipsis">…</span>'),d+=o("›",t+1,"ex-pagination__btn--arrow",t===r),d+=o("»",r,"ex-pagination__btn--arrow",t===r),e.innerHTML=d,e.onclick=u=>{const c=u.target.closest(".ex-pagination__btn");if(!c||c.disabled)return;const m=Number(c.dataset.page);!m||m===t||n(m)}}function re(){const e=document.querySelector(".exercises-list-wrapper"),t=e.querySelector("#filtersGrid"),r=e.querySelector("#exercisesPagination");if(!e)return;t&&(t.innerHTML=""),r&&(r.innerHTML="");let n=e.querySelector(".loader-cards");n||(n=document.createElement("div"),n.classList.add("loader-cards"),e.appendChild(n))}function ne(){const e=document.querySelector(".exercises-list-wrapper .loader-cards");e&&e.remove()}function Te(e){return e?e[0].toUpperCase()+e.slice(1):""}function k(e){const t=document.getElementById("filtersGrid");if(t){if(!e.length){t.innerHTML="<p>There are no exercises in this category</p>";return}t.dataset.exercises="true",t.innerHTML=e.map(r=>de({isHomePage:!0,id:r._id,...r})).join("")}}const Ae=()=>{const e=document.getElementById("filters"),t=document.getElementById("filtersGrid"),r=document.getElementById("selectedSubcategory"),n=document.getElementById("searchContainer"),o=document.getElementById("searchInput"),s=document.querySelector(".search-icon"),a=document.querySelector(".exercises-title"),i=document.getElementById("exercisesPagination"),d=12,u=10,c=()=>window.matchMedia("(max-width: 767px)").matches,m=()=>c()?9:12,l=()=>c()?8:10;let g="Muscles",h=[],_="",E=1,I=1,Y=c();function Z(f){document.querySelectorAll(".filter-btn").forEach(p=>p.classList.remove("filter-btn--active")),f.classList.add("filter-btn--active")}async function A(f,p=1){re();try{const y=await M.getFiltersOfExercises({filter:f,page:p,limit:d}),w=y.results||[],L=m(),q=L<d?w.slice(0,L):w;xe(q,f);const C=y.total??w.length;E=y.page??p,I=y.totalPages??(C?Math.ceil(C/L):1),i&&I>1?O({container:i,currentPage:E,totalPages:I,onPageChange:z=>{A(f,z),e.scrollIntoView({behavior:"smooth",block:"start"})}}):i&&(i.innerHTML="",i.hidden=!0)}catch(y){console.error("Error loading filters:",y),t.innerHTML="<p>Failed to load filters</p>",i&&(i.innerHTML="",i.hidden=!0)}finally{ne()}}function xe(f,p){if(i&&(i.innerHTML="",i.hidden=!0),!f.length){t.innerHTML="<p>There are no categories</p>";return}t.dataset.exercises="false",t.innerHTML=f.map(y=>Ie(y,p)).join("")}async function D(f,p,y=1){re();const w={page:y,limit:u};f==="Body parts"?w.bodypart=p:f==="Muscles"?w.target=p:f==="Equipment"&&(w.equipment=p);try{const L=await M.getExercisesByFilters(w),q=L.results||[],C=l(),z=C<u?q.slice(0,C):q,X=L.total??q.length;h=z,E=L.page??y,I=L.totalPages??(X?Math.ceil(X/C):1),k(h),i&&I>1?O({container:i,currentPage:E,totalPages:I,onPageChange:ve=>{D(g,_,ve),e.scrollIntoView({behavior:"smooth",block:"start"})}}):i&&(i.innerHTML="",i.hidden=!0)}catch(L){console.error("Error loading exercises:",L),t.innerHTML="<p>Failed to load exercises</p>",i&&(i.innerHTML="",i.hidden=!0)}finally{ne()}}function U(){const f=o.value.toLowerCase().trim();if(!f){k(h);return}const p=h.filter(y=>(y.name||"").toLowerCase().includes(f));k(p)}e.addEventListener("click",async f=>{const p=f.target.closest(".filter-btn");if(!p)return;const y=p.dataset.filter;!y||y===g||(g=y,Z(p),r.textContent="",_="",n.hidden=!0,o.value="",h=[],A(g,1))}),t.addEventListener("click",async f=>{const p=f.target.closest(".category-card");if(!p)return;const y=p.dataset.name,w=Te(y);_=y,r.textContent=w,n.hidden=!1,o.value="",await D(g,_,1)}),o.addEventListener("input",U),o.addEventListener("keydown",f=>{f.key==="Enter"&&(f.preventDefault(),U())}),s&&s.addEventListener("click",U),document.addEventListener("DOMContentLoaded",()=>{A("Muscles",1)}),a.addEventListener("click",async()=>{const f=document.querySelector(".filter-btn--active"),p=f?f.dataset.filter:g;g=p,f&&Z(f),_="",r.textContent="",o.value="",n.hidden=!0,h=[],await A(p,1)}),window.addEventListener("resize",()=>{const f=c();f!==Y&&(Y=f,t.dataset.exercises==="true"&&_?D(g,_,1):A(g,1))})},qe=()=>{K.defaults.baseURL="https://your-energy.b.goit.study/api";const e=/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;function t(n,o){T.show({title:n==="success"?"Success":"Error",message:o,position:"topRight",color:n==="success"?"green":"red",timeout:4e3,pauseOnHover:!0,closeOnClick:!0})}async function r(n){var o,s,a;try{const{data:i}=await K.post("/subscription",{email:n});t("success",i.message||"Subscription created!")}catch(i){if(((o=i.response)==null?void 0:o.status)===409)t("error","You are already subscribed!");else{const d=((a=(s=i.response)==null?void 0:s.data)==null?void 0:a.message)||i.message||"Something went wrong!";t("error",d)}}}document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelector(".footer-subscribe-form"),o=n.querySelector(".footer-subscribe-input");n.addEventListener("submit",async s=>{s.preventDefault();const a=o.value.trim();if(!e.test(a)){t("error","Please enter a valid email address. Example - info@goit.ua");return}await r(a),o.value=""})})},Fe=()=>{const e=document.querySelector(".to-top-btn");e&&e.addEventListener("click",t),window.addEventListener("scroll",r);function t(){document.body.scroll({behavior:"smooth",top:0}),document.documentElement.scroll({behavior:"smooth",top:0})}function r(){document.body.scrollTop>20||document.documentElement.scrollTop>20?e.style.display="flex":e.style.display="none"}};function ke(){let e=localStorage.getItem("favorites"),t=e?JSON.parse(e):[];const r=document.querySelector(".favorites-list-clear"),n=document.querySelector(".favorites-list"),o=document.querySelector(".favorites-pagination-block");if(!n||!o)return;let s=1;const a=10,i=()=>{if(!t||t.length===0){n.innerHTML="",o.innerHTML="",r&&(r.style.display="block");return}else r&&(r.style.display="none");let c;if(window.innerWidth>=1440)c=t,o.innerHTML="";else{const l=Math.ceil(t.length/a);s>l&&(s=l||1);const g=(s-1)*a,h=g+a;c=t.slice(g,h),d(l)}const m=c.map(l=>(l.isHomePage=!1,l.id=l._id,de(l)));n.innerHTML=m.join("")},d=c=>{if(c<=1){o.innerHTML="";return}let m="";for(let l=1;l<=c;l++)m+=`<button class="favorites-pagination-btn ${l===s?"active":""}" type="button" data-page="${l}">${l}</button>`;o.innerHTML=m},u=()=>{const c=localStorage.getItem("favorites");t=c?JSON.parse(c):[],i()};o.addEventListener("click",c=>{if(c.target.classList.contains("favorites-pagination-btn")){const m=Number(c.target.dataset.page);m!==s&&(s=m,i(),n.scrollIntoView({behavior:"smooth",block:"start"}))}}),n.addEventListener("click",c=>{const m=c.target.closest(".exercise-card__trash-icon");if(m){const g=m.closest(".exercise-card").dataset.id;t=t.filter(h=>String(h._id)!==String(g)),localStorage.setItem("favorites",JSON.stringify(t)),i()}}),window.addEventListener("resize",i),window.addEventListener("favorites-updated",u),window.addEventListener("storage",c=>{c.key==="favorites"&&u()}),i()}function $e(){const e=document.querySelector(".loader-page");e&&window.addEventListener("load",()=>{setTimeout(()=>{e.classList.add("hidden"),setTimeout(()=>{e.remove()},500)},500)})}const ue="favorites",Oe=`${x}#icon-heart`,He=`${x}#icon-trash`;function se(e){try{localStorage.setItem(ue,JSON.stringify(e))}catch(t){console.error("Failed to save favorites to localStorage:",t)}}function me(){try{const e=localStorage.getItem(ue);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Failed to parse favorites from localStorage:",e),[]}}function fe(e,t){return e.some(r=>String(r._id)===String(t))}function j(e,t){e&&(e.dataset.favorite=t?"true":"false",t?e.innerHTML=`
      Remove from favorites
      <svg class="exercise-modal__btn-icon" width="20" height="20">
        <use href="${He}"></use>
      </svg>
    `:e.innerHTML=`
      Add to favorites
      <svg class="exercise-modal__btn-icon" width="20" height="20">
        <use href="${Oe}"></use>
      </svg>
    `)}function ge(){const e=document.getElementById("exerciseModalFavoriteBtn");if(e&&e.dataset.id)return e.dataset.id;const t=document.getElementById("exerciseModal");if(t&&t.dataset.id)return t.dataset.id;if(t){const r=t.querySelector("[data-id]");if(r)return r.dataset.id}return null}async function Pe(e){const t=e.currentTarget,r=ge();if(!r)return;let n=me();const o=fe(n,r);t.disabled=!0;try{if(o)n=n.filter(s=>String(s._id)!==String(r)),se(n),j(t,!1);else{const s=await M.getExercisesById(r);!s||!s._id?console.error("Failed to load exercise data for favorites."):(n.push(s),se(n),j(t,!0))}}catch(s){console.error("Failed to toggle favorite exercise:",s)}finally{t.disabled=!1}}function pe(){const e=document.getElementById("exerciseModalFavoriteBtn");if(!e)return;const t=ge();if(!t)return;const r=me(),n=fe(r,t);j(e,n)}function oe(){const e=document.getElementById("exerciseModalFavoriteBtn");e&&(pe(),e.addEventListener("click",Pe))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",oe):oe();const ie={add:"Add to favorites",remove:"Remove from favorites"};function Re(){ze(),$.init({onShow:e=>console.info(`${e.id} is shown`),onClose:e=>console.info(`${e.id} is hidden`),closeTrigger:"data-micromodal-close",openClass:"is-open",disableScroll:!0,disableFocus:!1,awaitOpenAnimation:!0,awaitCloseAnimation:!0,debugMode:!1}),document.addEventListener("click",async e=>{const t=e.target.closest(".exercise-card__start");if(!t)return;const r=t.closest(".exercise-card");if(!r)return;const n=r.dataset.id;if(!n){console.error("Exercise ID not found");return}try{const o=await M.getExercisesById(n),s=document.getElementById("exerciseModal");s.dataset.id=n;const a=document.getElementById("exerciseModalFavoriteBtn");a.dataset.id=n,De(o),pe(),$.show("exerciseModal")}catch(o){console.error("Error loading exercise details:",o)}}),document.addEventListener("click",e=>{var o;if(!e.target.closest("#exerciseModalRatingBtn"))return;(o=document.getElementById("exerciseModalRating"))!=null&&o.textContent;const r=document.querySelector("#exerciseModal .modal__container"),n=document.querySelector("#ratingModal .modal__container");r&&n&&(n.style.display||(n.style.display="none"),r.style.animation="mmfadeOut 0.2s cubic-bezier(0.0, 0.0, 0.2, 1)",setTimeout(()=>{r.style.display="none",Ne();const s=document.getElementById("ratingModal"),a=document.getElementById("exerciseModal");a.classList.contains("is-open")||a.classList.add("is-open"),s.classList.add("is-open"),s.setAttribute("aria-hidden","false"),n.style.display="block",n.style.animation="mmfadeIn 0.2s cubic-bezier(0.0, 0.0, 0.2, 1)"},200))})}function Ne(e){const t=document.getElementById("ratingModalCurrentValue");t&&(t.textContent="0.0");const r=document.getElementById("ratingModalCurrentStars");if(!r)return;let n=0;r.innerHTML="";for(let s=0;s<5;s++){const a=s+1,i=document.createElement("button");i.type="button",i.className="rating-modal__star-btn",i.setAttribute("data-rating",a),i.setAttribute("aria-label",`Rate ${a} stars`);const d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("width","18"),d.setAttribute("height","18"),d.classList.add("exercise-modal__star","exercise-modal__star--empty");const u=document.createElementNS("http://www.w3.org/2000/svg","use");u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`${x}#icon-star`),d.appendChild(u),i.appendChild(d),i.addEventListener("click",()=>{n=a,o(n);const c=document.querySelector(".rating-modal__rating-value");c&&(c.textContent=n.toFixed(1)),r.setAttribute("data-selected-rating",n)}),r.appendChild(i)}function o(s){r.querySelectorAll(".rating-modal__star-btn").forEach((i,d)=>{const u=i.querySelector("svg");d<s?(u.classList.remove("exercise-modal__star--empty"),u.classList.add("exercise-modal__star--filled")):(u.classList.add("exercise-modal__star--empty"),u.classList.remove("exercise-modal__star--filled"))})}}function De(e){if(!e)return;const t=document.getElementById("exerciseModal");t&&e._id&&(t.dataset.exerciseId=e._id);const r=document.getElementById("exerciseModalImage");r&&e.gifUrl&&(r.src=e.gifUrl,r.alt=e.name||"Exercise");const n=document.getElementById("exerciseModal-title");n&&e.name&&(n.textContent=H(e.name));const o=document.getElementById("exerciseModalRating");o&&e.rating&&(o.textContent=e.rating.toFixed(1)),Ue(e.rating);const s=document.getElementById("exerciseModalTarget");s&&e.target&&(s.textContent=H(e.target));const a=document.getElementById("exerciseModalBodyPart");a&&e.bodyPart&&(a.textContent=H(e.bodyPart));const i=document.getElementById("exerciseModalEquipment");i&&e.equipment&&(i.textContent=H(e.equipment));const d=document.getElementById("exerciseModalPopular");d&&e.popularity&&(d.textContent=e.popularity);const u=document.getElementById("exerciseModalCalories");u&&e.burnedCalories&&e.time&&(u.textContent=`${e.burnedCalories}/${e.time} min`);const c=document.getElementById("exerciseModalDescription");c&&e.description&&(c.textContent=e.description);const m=document.querySelector(".exerciseModalFavoriteBtn__text"),l=document.querySelector(".exercise-modal__btn__heart-icon"),g=document.querySelector(".exercise-card__btn__trash-icon");m&&l&&g&&((JSON.parse(localStorage.getItem("favorites"))||[]).findIndex(E=>E._id===e._id)===-1?(m.textContent=ie.add,l.style.display="block",g.style.display="none"):(m.textContent=ie.remove,l.style.display="none",g.style.display="block"))}function H(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function Ue(e){const t=document.getElementById("exerciseModalStars");if(!(!t||!e)){t.innerHTML="";for(let r=0;r<5;r++){const n=document.createElement("span");n.className="exercise-modal__star-wrapper",n.style.position="relative",n.style.display="inline-block",n.style.width="18px",n.style.height="18px";const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("width","18"),o.setAttribute("height","18"),o.classList.add("exercise-modal__star","exercise-modal__star--empty");const s=document.createElementNS("http://www.w3.org/2000/svg","use");s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`${x}#icon-star`),o.appendChild(s),n.appendChild(o);const a=Math.max(0,Math.min(100,(e-r)*100));if(a>0){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width","18"),i.setAttribute("height","18"),i.classList.add("exercise-modal__star","exercise-modal__star--filled"),i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.clipPath=`inset(0 ${100-a}% 0 0)`;const d=document.createElementNS("http://www.w3.org/2000/svg","use");d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`${x}#icon-star`),i.appendChild(d),n.appendChild(i)}t.appendChild(n)}}}const V=document.getElementById("ratingForm");if(V){V.addEventListener("submit",async r=>{var c,m;r.preventDefault();const n=(c=document.getElementById("ratingEmail"))==null?void 0:c.value.trim(),o=(m=document.getElementById("ratingComment"))==null?void 0:m.value.trim(),s=document.getElementById("ratingModalCurrentStars"),a=parseFloat((s==null?void 0:s.dataset.selectedRating)||"0");if(!n||!a){console.error("Please fill all fields and select a rating");return}const i=document.getElementById("exerciseModal"),d=i==null?void 0:i.dataset.exerciseId;if(!d)return;const u={email:n,review:o,rate:a};try{await M.addRating(d,u),V.reset();const l=document.querySelector(".rating-modal__rating-value");l&&(l.textContent="0.0"),s.removeAttribute("data-selected-rating"),s.querySelectorAll(".rating-modal__star-btn").forEach(h=>{const _=h.querySelector("svg");_&&(_.classList.add("exercise-modal__star--empty"),_.classList.remove("exercise-modal__star--filled"))}),$.close("ratingModal"),T.info({title:"Success",message:"Rating sent successfully",position:"topRight"}),J()}catch(l){T.error({title:"Error",message:l.message,position:"topRight"})}});const e=document.querySelector("#ratingModal .modal__close");e&&e.addEventListener("click",r=>{r.preventDefault(),J()});const t=document.querySelector("#exerciseModal .modal__overlay");t&&t.addEventListener("click",r=>{if(r.target===t){const n=document.getElementById("ratingModal");n&&n.classList.contains("is-open")?J():$.close("exerciseModal")}})}function J(){const e=document.getElementById("exerciseModal"),t=document.getElementById("ratingModal"),r=document.querySelector("#exerciseModal .modal__container"),n=document.querySelector("#ratingModal .modal__container");e&&e.classList.contains("is-open")&&r&&n?(n.style.animation="mmfadeOut 0.2s cubic-bezier(0.0, 0.0, 0.2, 1)",setTimeout(()=>{t.classList.remove("is-open"),t.setAttribute("aria-hidden","true"),n.style.display="none",r.style.display="block",r.style.animation="mmfadeIn 0.2s cubic-bezier(0.0, 0.0, 0.2, 1)"},200)):$.close("ratingModal")}function ze(){const e=document.querySelector("#exerciseModal .modal__close use");e&&e.setAttribute("href",`${x}#icon-cross`);const t=document.querySelector(".exercise-modal__btn__heart-icon use");t&&t.setAttribute("href",`${x}#icon-heart`);const r=document.querySelector(".exercise-card__btn__trash-icon use");r&&r.setAttribute("href",`${x}#icon-trash`);const n=document.querySelector("#ratingModal .modal__close use");n&&n.setAttribute("href",`${x}#icon-cross`)}const b=document.getElementById("searchInput"),ae=document.querySelector(".search-btn"),ce=document.querySelector(".search-clear-btn"),R=document.getElementById("filtersGrid"),ye=document.getElementById("selectedSubcategory"),B=document.getElementById("exercisesPagination");function he(){const e=document.querySelector(".filter-btn--active");return e?e.dataset.filter:"Muscles"}function _e(e){switch(e){case"Muscles":return"muscles";case"Body parts":return"bodypart";case"Equipment":return"equipment";default:return"muscles"}}function Ge(){return b?b.closest(".search-wrapper"):null}function W(){const e=Ge();e&&(b.value.trim()?e.classList.add("has-text"):e.classList.remove("has-text"))}async function N(e=1){const t=ye.textContent.trim().toLowerCase();if(!t)return;const r=he(),n=_e(r);R.innerHTML="<p>Loading...</p>";try{const o={page:e,limit:12};o[n]=t;const s=await M.getExercisesByFilters(o),a=Array.isArray(s.results)?s.results:[];if(k(a),B){const i=typeof s.total=="number"?s.total:a.length,d=s.page??e,u=s.limit??o.limit??12,c=typeof s.totalPages=="number"?s.totalPages:i?Math.ceil(i/u):0;O({container:B,currentPage:d,totalPages:c,onPageChange:m=>{N(m)}})}}catch(o){console.error(o),R.innerHTML="<p>Failed to load exercises</p>",T.error({title:"Error",message:"Failed to load exercises",position:"topRight"})}}async function Q(e=1){const t=b.value.trim(),r=ye.textContent.trim().toLowerCase(),n=he(),o=_e(n);if(W(),!r){T.info({title:"Select category",message:"Choose the category first",position:"topRight"});return}if(!t){await N(1);return}R.innerHTML="<p>Loading...</p>";try{const s={page:e,limit:12,keyword:t};s[o]=r;const a=await M.getExercisesByFilters(s),i=Array.isArray(a.results)?a.results:[];if(!i.length){R.innerHTML="<p>There are no results for your query</p>",B&&O({container:B,currentPage:1,totalPages:0,onPageChange:()=>{}});return}if(k(i),B){const d=typeof a.total=="number"?a.total:i.length,u=a.page??e,c=a.limit??s.limit??12,m=typeof a.totalPages=="number"?a.totalPages:d?Math.ceil(d/c):1;O({container:B,currentPage:u,totalPages:m,onPageChange:l=>{Q(l)}})}}catch(s){console.error(s),T.error({title:"Error",message:"Search failed",position:"topRight"})}}b&&(b.addEventListener("input",async e=>{e.stopImmediatePropagation(),W(),b.value.trim()||await N(1)},!0),b.addEventListener("keydown",e=>{e.key==="Enter"&&(e.preventDefault(),e.stopImmediatePropagation(),Q(1))},!0));ae&&ae.addEventListener("click",e=>{e.preventDefault(),e.stopImmediatePropagation(),Q(1)},!0);ce&&b&&ce.addEventListener("click",async e=>{e.preventDefault(),e.stopImmediatePropagation(),b.value="",W(),await N(1),b.focus()},!0);const Ve=()=>{$e();const e=document.body.dataset.page;e==="home"?Ae():e==="favorites"&&console.log("PAGE FAVORITES"),Le(),Me(),Fe(),qe(),ke(),Re()};Ve();
//# sourceMappingURL=main-HOkRtpsw.js.map
